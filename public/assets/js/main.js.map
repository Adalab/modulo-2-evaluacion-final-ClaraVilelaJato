{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n//Nos traemos de html los elementos para trabajar con ellos en JS\n\nconst inputShow = document.querySelector('.js-searchinput');\nconst searchButton = document.querySelector('.js-search-btn');\nconst reset = document.querySelector('.reset__btn');\nconst resultsContainer = document.querySelector('.js-list-results'); //selecciono el elem. de html donde pintaré los resultados\n\nlet apiDataShows = []; //array donde almaceno resultados\n\nlet favorites = [];\n\n//Función para hacer petición al servidor\n\nfunction fetchToApi() {\n  let inputShowValue = inputShow.value.toLocaleLowerCase();\n  fetch(`https://api.tvmaze.com/search/shows?q=${inputShowValue}`)\n    .then((response) => response.json())\n    .then((data) => {\n      apiDataShows = data;\n    });\n  paintShows();\n  console.log(apiDataShows);\n}\n\nfunction handleSearch(ev) {\n  ev.preventDefault();\n  fetchToApi();\n}\n//Añadimos evento que desencadena la funcion fetch al pulsar el boton, nos traemos los datos del api\nsearchButton.addEventListener('click', handleSearch);\n\n//Esta función es la encargada de manejar el evento click sobre cada uno de los li\nfunction handleShows(ev) {\n  const pickedShow = parseInt(ev.currentTarget.id);\n  const objectClickedShow = apiDataShows.find((show) => {\n    return show.show.id === pickedShow;\n  });\n  const favoritesFound = favorites.findIndex((fav) => {\n    return fav.show.id === pickedShow;\n  });\n\n  if (favoritesFound === -1) {\n    // añado al array de favoritos\n    favorites.push(objectClickedShow);\n  } else {\n    // si el findIndex me ha devuelto un número mayor o igual a 0 es que sí está en el array de favoritos\n    // quiero sacarlo de array de favoritos\n    // para utilizar splice necesito el índice del elemento que quiero borrar\n    // y quiero borrar un solo elemento por eso colocamos 1\n    favorites.splice(favoritesFound, 1);\n  }\n  console.log(favorites);\n  paintShows();\n}\n\nfunction listenShows() {\n  const showList = document.querySelectorAll('.js-picked'); //le doy clase a los li que cree con la funcion paint\n  for (const show of showList) {\n    show.addEventListener('click', handleShows);\n  }\n}\n\n//esta funcion la incluimos en la funcion fecth\nfunction paintShows() {\n  let html = '';\n  for (const eachSerie of apiDataShows) {\n    const oneSerie = eachSerie.show;\n    let image = '';\n    if (oneSerie.image === null) {\n      image = 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV';\n    } else {\n      image = oneSerie.image.medium;\n    }\n    html += `<li id=\"${oneSerie.id}\" class=\"serie__box js-picked\">`;\n    html += `<div class=\"border-show\">`;\n    html += `<img src=\"${image}\" alt=\"${oneSerie.name}\">`;\n    html += `<h3 class=\"serie__name\">${oneSerie.name}</h3></li>`;\n    html += `</div>`;\n  }\n  resultsContainer.innerHTML = html;\n  listenShows();\n}\n"]}